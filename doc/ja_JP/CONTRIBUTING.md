# 貢献ガイドライン

## NOTE

プロジェクトメンテナーの日本語レベルはそれほど高くないため、翻訳に誤りがある可能性があります。慎重に判断してください。この点についてご不便をおかけしますことをお詫び申し上げます。

## **貢献者の皆様へ**

線形代数ライブラリ​（Eigen、LAPACK、NumPy/SciPyのlinalgモジュール、ドメイン固有フレームワークなど）に精通した開発者の皆様の参加を歓迎します。コードの貢献や、行列計算・アルゴリズム最適化に関する専門知識の共有をお待ちしております。同時に、開発やドキュメントの改善への参加を通じて、行列分解、疎行列システム、固有値計算などの基礎的な線形代数技術を学びたい新人の皆様の挑戦を応援しています。本プロジェクトでは、経験豊富な開発者から初心者まで、API設計の探求、パフォーマンスベンチマーク、実装例の作成など、各自の関心に沿った貢献の機会を提供することを目指しています。

本プロジェクトを支えてくださる全ての貢献者に心より感謝申し上げます。最適化された計算カーネルの提出、APIドキュメントの改善、数値安定性や拡張性に関する洞察の提供など、あらゆる貢献がプロジェクトの堅牢性を高めます。皆様の情熱と技術的厳密さが、このライブラリの機能向上を推進し、計算数学コミュニティの協力を促進しています。皆様のご尽力に深く感謝するとともに、研究者やエンジニアが複雑な線形代数の課題に効率的に取り組むことを可能にするツールセットを構築し、新たなマイルストーンを共に達成できることを期待しております。

## 目次

1. [コードスタイル](#1-コードスタイル)
2. [名前の命名規則](#2-名前の命名規則)
   2.1 [変数の命名](#21-変数の命名)
   2.2 [関数の命名](#22-関数の命名)
   2.3 [ストラクトとトレイトの命名](#23-ストラクトとトレイトの命名)
   2.4 [定数の命名](#24-定数の命名)
   2.5 [結果エラーのエラーコードの設計](#25-結果エラーのエラーコードの設計)
3. [コメント](#3-コメント)
4. [ファイルの規格](#4-ファイルの規格)
   4.1[フォルダ名の命名](#41-フォルダ名の命名)
   4.2[ファイルの構成](#42-ファイルの構成)
5. [コミット規則](#5-コミット規則)
   5.1[コミットメッセージ](#51-コミットメッセージ)
   5.2[コミットの頻度](#52-コミットの頻度)
6. [コードレビュー](#6-コードレビュー)

## 1. コードスタイル

本プロジェクトは MoonBit ツールチェインが採用するフォーマット規則に従う。以下のコマンドを実行してコードを自動でフォーマットすること。

```bash
moon fmt
```

コードの一貫性を保つために、コミット前に `moon fmt` を実行すること。

また、`ready_to_pr.sh` スクリプトを実行してコードのフォーマット、チェック、テストカバレッジファイルの生成、`.mbti` ファイルの生成を行うことも可能。

## 2. 名前の命名規則

### 2.1 変数の命名

小文字とアンダースコア（ `_` ）を使用（例: `my_var`）。

変数名は意味が明確で、用途が直感的に理解できるものにする。

### 2.2 関数の命名

小文字とアンダースコア（ `_` ）を使用（例: `calc_total_price()`）。

関数名は簡潔かつ説明的にし、機能が明確に分かるようにする。

### 2.3 ストラクトとトレイトの命名

パスカルケース（PascalCase）を使用（例: `MyStruct`, `MyTrait`）。

機能や役割を直感的に表す名前を使用し、抽象的すぎる名前は避ける。

### 2.4 定数の命名

小文字とアンダースコア（ `_` ）を使用（例: `machine_dbl_epsilon`）。

必要に応じてカテゴリーをプレフィックスとして付与（例: `machine_dbl_epsilon` は機械関連の定数）。

分かりやすく、簡潔な名前を付ける。

### 2.5 結果エラーのエラーコードの設計

大文字とアンダースコア（ `_` ）を使用（例: `E_MAX_ITER`）。

エラーコードには `E` をプレフィックスとして付与。

短く分かりやすいエラーコードを心掛ける。

## 3. コメント

簡潔さ：冗長にならず、明確に記述する。

一貫性：コード全体で統一された用語とスタイルを使用する。

明確さ：分かりやすい表現を用い、曖昧な表現や専門用語の多用を避ける。

正確さ：コードの動作や目的を正しく反映する。

最新状態の維持：コードの変更に応じてコメントを更新する。

開発者は MoonBit LSP の AI によるコードコメント生成機能を活用できるが、AI が生成したコメントは必ずレビューし、正確性を確認すること。

## 4. ファイルの規格

### 4.1 フォルダ名の命名

小文字のみを使用。

フォルダ名は簡潔かつ説明的にし、アンダースコア（ `_` ）で区切る。数字や特殊文字は避ける。

例：

微分関連の機能：`diff`

導関数関連の機能：`deriv`

### 4.2 ファイルの構成

ファイルは機能ごとに整理し、それぞれ特定の機能に焦点を当てる。

小文字とアンダースコア（ `_` ）を使用し、機能を明確に示す名前を付ける。

例：

`gauss_kronrod.mbt`: ガウス求積法（クロンスロッド拡張）を実装。

`adaptive_quadrature_gk.mbt`: ガウス求積法（クロンスロッド拡張）を用いた適応型求積法を実装。

注意：`utils.mbt` のような汎用的すぎる名前は避け、機能を明確に表す名前を使用すること。

## 5. コミット規則

### 5.1 コミットメッセージ

`ready_to_pr.sh` スクリプトを実行し、コードフォーマット、チェック、テストカバレッジ生成、`.mbti` ファイル生成を行うこと。

コミットごとに変更内容を明確に記述する。

コミットメッセージは英語で、簡潔かつ明確に記述する。

`fix:`, `feat:`, `refactor:`, `doc:` などのプレフィックスを使用。

例：

```text
fix: fix bug in something
feat: add feature for something
refactor: refactor something
doc: add docs for something
```

### 5.2 コミットの頻度

コミットは小さく、一つの機能や修正に集中させる。

複数の変更を一つの大きなコミットにまとめないこと。

## 6. コードレビュー

`moon.mod.json` の依存関係やバージョンを変更する前に、メンテナーまたはコラボレーターに確認すること。

すべてのコードはコードレビューを受ける必要がある。

コードレビューでは、コードの品質、スタイル、パフォーマンス、セキュリティを重視する。

レビュアーは建設的なフィードバックを提供し、コードの改善に努める。
